{"version":3,"sources":["services/LocalCacheService.ts","components/tree-view/TreeNode.tsx","components/tree-view/TreeView.tsx","Navigation.tsx","components/BusyMask.tsx","Layout.tsx","services/GitHubContentService.ts","components/NodeDetails.tsx","App.tsx","serviceWorker.ts","index.tsx","models/index.ts","models/GitNode.d.ts","images/logo.png"],"names":["CacheKeys","getCacheValue","cacheKey","valueKey","cacheObjString","localStorage","getItem","result","JSON","parse","undefined","setCacheValue","value","cacheObj","setItem","stringify","TreeNode","props","handleCollapseToggle","e","nodeName","isCollapsed","node","name","state","collapsed","NavNodesCollapsedState","setState","recurseChildren","childrenNodes","map","key","className","cachedState","this","onClick","children","length","icon","faChevronRight","faChevronDown","size","activeClassName","to","urlPath","React","TreeView","contentTree","nodes","_","homeIndex","findIndex","x","match","linksIndex","homeNode","splice","linksNode","unshift","push","mapToTreeNodes","Navigation","id","BusyMask","Layout","src","logo","width","height","alt","isBusy","GitHubContentService","auth","_octokit","_owner","_repo","Octokit","userAgent","baseUrl","_getGitNodes","_buildContentTree","pathNode","contentCounter","initialContentNodes","repos","getContents","owner","repo","path","response","status","tmpWorkItems","exit","Array","isArray","data","forEach","workItem","contentNode","GitNode","_contentNodeExists","i","Type","encodedUri","encodeURIComponent","Path","console","log","message","downloadUrl","filter","n","pathLevels","split","indexFile","pop","reduce","prev","find","c","DownloadUrl","_toUrlSafePath","contentNodes","pathElement","from","r","toLowerCase","replace","NodeDetails","content","pageName","fetch","text","source","escapeHtml","Component","App","toggleIsBusy","mapRoutes","initialRoutes","render","routeProps","isError","ghAuth","method","headers","authResponse","debug","ghContentService","getSiteContentTree","tree","basename","Boolean","window","location","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","responseData","GitUrl","HTMLUrl","Name","SHA","Size","URL","Links","download_url","git_url","html_url","sha","type","url","Git","_links","git","HTML","html","Self","self","module","exports"],"mappings":"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","file":"static/js/main.8fed36b9.chunk.js","sourcesContent":["export enum CacheKeys {\r\n  NavNodesCollapsedState = 'nav-nodes-collapsed-state'\r\n}\r\n\r\nexport const getNavNodeCollapsedState = (nodeName: string): boolean | null =>\r\n  getCacheValue(CacheKeys.NavNodesCollapsedState, nodeName);\r\n\r\nexport const cacheNavNodeCollapsedState = (nodeName: string, isCollapsed: boolean): void =>\r\n  setCacheValue(CacheKeys.NavNodesCollapsedState, nodeName, isCollapsed);\r\n\r\nexport const getCacheValue = (cacheKey: string, valueKey: string): any | null => {\r\n  const cacheObjString = localStorage.getItem(cacheKey);\r\n  const cacheObj: { [index: string]: any } = cacheObjString ? JSON.parse(cacheObjString) : {};\r\n  const result = cacheObj[`\"${valueKey}\"`];\r\n\r\n  return result === undefined ? null : result;\r\n}\r\n\r\nexport const setCacheValue = (cacheKey: string, valueKey: string, value: any): void => {\r\n  const cacheObjString = localStorage.getItem(cacheKey);\r\n  let cacheObj: { [index: string]: any } = cacheObjString\r\n    ? JSON.parse(cacheObjString)\r\n    : {};\r\n\r\n  cacheObj[`\"${valueKey}\"`] = value;\r\n\r\n  localStorage.setItem(cacheKey, JSON.stringify(cacheObj));\r\n}","import * as React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { IContentTreeNode } from '../../models';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faChevronRight, faChevronDown } from '@fortawesome/free-solid-svg-icons';\r\nimport { getNavNodeCollapsedState, cacheNavNodeCollapsedState } from '../../services/LocalCacheService';\r\n\r\ninterface ITreeNodeProps {\r\n  node: IContentTreeNode;\r\n  className?: string;\r\n}\r\n\r\ninterface ITreeNodeState {\r\n  collapsed: boolean\r\n}\r\n\r\nexport default class TreeNode extends React.Component<ITreeNodeProps, ITreeNodeState> {\r\n  constructor(props: ITreeNodeProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      collapsed: true\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const cachedState: boolean | null = getNavNodeCollapsedState(this.props.node.name);\r\n    this.setState({ collapsed: cachedState === null ? this.state.collapsed : cachedState });\r\n  }\r\n\r\n  handleCollapseToggle = (e: React.MouseEvent) => {\r\n    cacheNavNodeCollapsedState(this.props.node.name, !this.state.collapsed);\r\n    this.setState({ collapsed: !this.state.collapsed });\r\n  }\r\n\r\n  render(): JSX.Element {\r\n    const { node, className } = this.props;\r\n    const { collapsed } = this.state;\r\n\r\n    if (node) {\r\n      return (\r\n        <ul key={node.name} className={`nav-item disable-selection ${className}`}>\r\n          <div className=\"row no-gutters pt-1 pb-1\">\r\n            <span className=\"col-1 text-center pointer\" onClick={this.handleCollapseToggle}>\r\n            {(node.children && node.children.length)\r\n              ? <FontAwesomeIcon icon={collapsed ? faChevronRight : faChevronDown} size=\"sm\"/>\r\n              : null}\r\n            </span>\r\n            <NavLink className=\"col-11 nav-link pt-0 pb-1\" activeClassName=\"selected-nav-link\" to={`/${node.urlPath}`}>{node.name}</NavLink>\r\n          </div>\r\n\r\n          {(node.children && node.children.length)\r\n            ? this.recurseChildren(node.children)\r\n            : null}\r\n        </ul>\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  recurseChildren = (childrenNodes: IContentTreeNode[]) => {\r\n    return childrenNodes.map(node => <TreeNode key={node.name} node={node} className={`pl-4 ${this.state.collapsed && \"nav-collapsed\"}`}/>)\r\n  }\r\n}","import * as React from 'react';\r\nimport { IContentTreeNode } from '../../models';\r\nimport TreeNode from './TreeNode';\r\nimport * as _ from 'lodash';\r\n\r\ninterface ITreeViewProps {\r\n  contentTree: IContentTreeNode\r\n}\r\n\r\nconst TreeView = (props: ITreeViewProps) => {\r\n  const { contentTree } = props;\r\n\r\n  const mapToTreeNodes = (contentTree: IContentTreeNode): JSX.Element[] => {\r\n    const nodes = _.cloneDeep(contentTree.children);\r\n\r\n    const homeIndex = nodes.findIndex(x => x.name.match(/\\bhome\\b/i))\r\n    const linksIndex = nodes.findIndex(x => x.name.match(/\\blinks\\b/i))\r\n\r\n    const homeNode = homeIndex !== -1 ? nodes.splice(homeIndex, 1)[0] : null;\r\n    const linksNode = linksIndex !== -1 ? nodes.splice(linksIndex, 1)[0] : null;\r\n\r\n    // Add home to beginning, links to end of tree\r\n    nodes.unshift(homeNode);\r\n    nodes.push(linksNode);\r\n\r\n    return nodes.map(node => (\r\n      node\r\n        ? <TreeNode key={node.name} node={node} className=\"pl-0\"/>\r\n        : null\r\n    ));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {(contentTree && contentTree.children && contentTree.children.length)\r\n        ? mapToTreeNodes(contentTree)\r\n        : null\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TreeView;","import React from 'react';\r\nimport TreeView from './components/tree-view/TreeView';\r\nimport { IContentTreeNode } from './models/ContentTreeNode';\r\n\r\ninterface INavigationProps {\r\n  contentTree: IContentTreeNode;\r\n}\r\n\r\nconst Navigation = (props: INavigationProps): JSX.Element => {\r\n  return (\r\n    <div id=\"navigation\">\r\n      <ul className=\"nav flex-column\">\r\n        <TreeView contentTree={props.contentTree}/>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navigation;","import * as React from 'react';\r\nimport '../styles/App.scss';\r\nimport '../styles/Loading.scss';\r\n\r\nconst BusyMask = (props: any) => {\r\n  return (\r\n    <div id=\"busy-mask\">\r\n      <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BusyMask;","import React from 'react';\r\nimport Navigation from './Navigation';\r\nimport logo from './images/logo.png';\r\nimport { IContentTreeNode } from './models/ContentTreeNode';\r\nimport BusyMask from './components/BusyMask';\r\n\r\ninterface ILayoutProps {\r\n  contentTree: IContentTreeNode;\r\n  children: JSX.Element|JSX.Element[];\r\n  isBusy: boolean;\r\n}\r\n\r\nexport default function Layout(props: ILayoutProps) {\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      <div id=\"main-banner\" className=\"row\">\r\n        <div className=\"col-6 p-1 pl-5\">\r\n          <img id=\"main-logo\" src={logo} width=\"50px\" height=\"50px\" alt=\"logo\"/>\r\n          <h3 id=\"main-title\" className=\"d-inline-block\">Technological Wiki</h3>\r\n        </div>\r\n      </div>\r\n      {props.isBusy\r\n        ? <BusyMask/>\r\n        : (\r\n          <div className=\"row\">\r\n            <div className=\"col-xl-3 col-sm-5\">\r\n              <Navigation contentTree={props.contentTree}/>\r\n            </div>\r\n            <div className=\" col-xl-9 col-sm-7 mt-3 pt-3\">\r\n              {props.children}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n    </div>\r\n  );\r\n}","import Octokit from '@octokit/rest';\r\nimport { GitNode, IContentTreeNode } from '../models';\r\n\r\nexport default class GitHubContentService {\r\n  private readonly _octokit: Octokit;\r\n  private _owner = 'oleg3790';\r\n  private _repo = 'wiki';\r\n\r\n  constructor(auth: string = '') {\r\n    this._octokit = new Octokit({\r\n      auth: auth,\r\n      userAgent: 'wiki',\r\n      baseUrl: 'https://api.github.com',\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Gets an object that models the site-content branch's content\r\n   */\r\n  public async getSiteContentTree(): Promise<IContentTreeNode> {\r\n    const nodes = await this._getGitNodes('wiki', 0, []);\r\n    return nodes.length > 0 ? this._buildContentTree(nodes) : null;\r\n  }\r\n\r\n  /**\r\n   * Recursively gets all content nodes based off of each resource node in the site-content branch\r\n   * @param pathNode Branch resource path\r\n   * @param contentCounter Used to remember count state during recursion\r\n   * @param tmpResultObj Object used to hold the result during the build\r\n   */\r\n  private async _getGitNodes(pathNode: string, contentCounter: number, initialContentNodes: GitNode[]): Promise<GitNode[]> {\r\n    try {\r\n      const response = await this._octokit.repos.getContents({\r\n        owner: this._owner,\r\n        repo: this._repo,\r\n        path: `${pathNode}?ref=site-content`\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        let tmpWorkItems: any[] = [];\r\n        let exit = false;\r\n        // Check if response data is array or object as response data is object when there is no other dir nodes under the content\r\n        if (Array.isArray(response.data)) {\r\n          tmpWorkItems = response.data;\r\n        } else if (typeof response.data === 'object') {\r\n          tmpWorkItems.push(response.data);\r\n        }\r\n\r\n        tmpWorkItems.forEach(workItem => {\r\n          const contentNode = new GitNode(workItem)\r\n          // Recursion exit condition: don't add existing nodes to collection\r\n          if (this._contentNodeExists(initialContentNodes, contentNode)) {\r\n            exit = true;\r\n            return;\r\n          }\r\n          initialContentNodes.push(new GitNode(workItem));\r\n        });\r\n\r\n        if (exit) {\r\n          return initialContentNodes;\r\n        }\r\n\r\n        for (let i = contentCounter; i < initialContentNodes.length; i++) {\r\n          if (initialContentNodes[i].Type !== 'file') {\r\n            const encodedUri = encodeURIComponent(initialContentNodes[i].Path);\r\n            return await this._getGitNodes(encodedUri, i + 1, initialContentNodes);\r\n          }\r\n        }\r\n      } else {\r\n        console.log(`GitHub API responded with ${response.status} with ${response.data.length} data elements`);\r\n      }\r\n      return initialContentNodes;\r\n    } catch (ex) {\r\n      console.log(`GitHubContentService.doGetContents Error - ${ex.message}`);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  private _buildContentTree(nodes: GitNode[]): IContentTreeNode {\r\n    let contentTree: IContentTreeNode = {\r\n      name: null,\r\n      downloadUrl: null,\r\n      urlPath: null,\r\n      children: []\r\n    };\r\n\r\n    nodes\r\n      .filter(n => n.Type === 'file')\r\n      .forEach(n => {\r\n        const pathLevels = n.Path.split('/');\r\n        let indexFile = pathLevels.pop();\r\n\r\n        if (indexFile && indexFile.match(/index\\.md/i)) {\r\n          pathLevels.reduce((prev, path, i) => {\r\n            if (pathLevels.length - i - 1) {\r\n              if (prev.children && prev.children.length) {\r\n                return (prev.children as Array<any>).find(c => c.name === path) || prev;\r\n              }\r\n\r\n              prev.name = prev.name || path;\r\n              prev.children = prev.children || [];\r\n            } else {\r\n              prev.children.push({ name: path, children: [], downloadUrl: n.DownloadUrl, urlPath: this._toUrlSafePath(path) });\r\n            }\r\n            return prev;\r\n          }, contentTree);\r\n        }\r\n    });\r\n    return contentTree;\r\n  }\r\n\r\n  /**\r\n   * Check if node exists in contentNodes\r\n   * @param contentNodes\r\n   * @param node\r\n   */\r\n  private _contentNodeExists(contentNodes: GitNode[], node: GitNode) {\r\n    return contentNodes.filter(n => n.Path === node.Path).length > 0;\r\n  }\r\n\r\n  private _toUrlSafePath(pathElement: string): string {\r\n    const regexReplacements = [\r\n      {from: /#/g, to: 'sharp'},\r\n      {from: /\\.+/g, to: 'dot'},\r\n      {from: /\\s{2,}/g, to: ' '},\r\n      {from: /[\\s/\\\\]+/g, to: '-'},\r\n      {from: /[()+~=!@$%^&*{}?]+/g, to: ''},\r\n    ];\r\n\r\n    regexReplacements.forEach(r => {\r\n      pathElement = pathElement.toLowerCase().replace(r.from, r.to);\r\n    })\r\n    return pathElement;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { IContentTreeNode } from '../models';\r\n\r\ninterface INodeDetailProps {\r\n  contentNode: IContentTreeNode | null\r\n}\r\n\r\ninterface INodeDetailState {\r\n  content: string | null;\r\n  pageName: string | null;\r\n}\r\n\r\nexport default class NodeDetails extends React.Component<INodeDetailProps, INodeDetailState> {\r\n  constructor(props: INodeDetailProps) {\r\n    super(props);\r\n    this.state = {\r\n      content: null,\r\n      pageName: null\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { contentNode } = this.props;\r\n\r\n    if (contentNode.downloadUrl) {\r\n      const response = await fetch(contentNode.downloadUrl);\r\n      this.setState({ content: await response.text(), pageName: contentNode.name });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"nav-details\">\r\n        {this.state.content && (\r\n          <div>\r\n            <h1 className=\"page-title\">{this.state.pageName}</h1>\r\n            <hr/>\r\n            <ReactMarkdown source={this.state.content as string} escapeHtml={false}/>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport './styles/App.scss';\r\nimport { HashRouter, Route, Redirect } from 'react-router-dom';\r\nimport Layout from './Layout';\r\nimport GitHubContentService from './services/GitHubContentService';\r\nimport { IContentTreeNode } from './models';\r\nimport NodeDetails from './components/NodeDetails';\r\n\r\ninterface IAppState {\r\n  contentTree: IContentTreeNode;\r\n  isError: boolean;\r\n  isBusy: boolean;\r\n}\r\n\r\nexport default class App extends React.Component<any, IAppState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {\r\n      contentTree: null,\r\n      isError: false,\r\n      isBusy: false,\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.toggleIsBusy();\r\n\r\n    try {\r\n      let ghAuth = localStorage.getItem('auth') || '';\r\n\r\n      if (!ghAuth) {\r\n        const authResponse = await fetch('http://olegkrysko-wiki-auth.azurewebsites.net/api/key', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Request-Item': 'ghKey',\r\n            'Content-Type': 'text/plain'\r\n          }\r\n        });\r\n\r\n        if (authResponse.status == 200) {\r\n          ghAuth = await authResponse.text();\r\n          localStorage.setItem('auth', ghAuth);\r\n          console.debug('auth retrieved successfully');\r\n        } else {\r\n          console.log('Could not get auth for gh repo, requests to GH API will be limited');\r\n        }\r\n      }\r\n\r\n      const ghContentService = new GitHubContentService(ghAuth);\r\n      const tree = await ghContentService.getSiteContentTree();\r\n\r\n      if (tree == null) {\r\n        throw 'No tree content could be loaded';\r\n      }\r\n\r\n      this.setState({ contentTree: tree });\r\n    } catch {\r\n      this.setState({ isError: true });\r\n    }\r\n\r\n    this.toggleIsBusy();\r\n  }\r\n\r\n  toggleIsBusy = () => {\r\n    this.setState({ isBusy: !this.state.isBusy });\r\n  }\r\n\r\n  /**\r\n   * Recursively maps routes, using the content tree\r\n   * @param content\r\n   * @param initialRoutes Any initial routes to be passed\r\n   */\r\n  mapRoutes = (contentTree: IContentTreeNode, initialRoutes: JSX.Element[] = []): JSX.Element[] => {\r\n    contentTree.children.forEach(node => {\r\n      if (node.downloadUrl && node.urlPath) {\r\n        initialRoutes.push(\r\n          <Route key={node.urlPath} path={`/${node.urlPath}`}\r\n            render={(routeProps) => <NodeDetails {...routeProps} contentNode={node}/>}/>);\r\n      }\r\n\r\n      if (node.name.match(/home/i)) {\r\n        initialRoutes.unshift(<Route key=\"//home//\" path=\"/\"><Redirect to={node.urlPath}/></Route>)\r\n      }\r\n\r\n      return this.mapRoutes(node, initialRoutes);\r\n    });\r\n    return initialRoutes;\r\n  }\r\n\r\n  render() {\r\n    const { contentTree, isBusy, isError } = this.state;\r\n    return (\r\n      <HashRouter basename=\"/\">\r\n        <Layout contentTree={contentTree} isBusy={isBusy}>\r\n          <div>\r\n            {isError\r\n              ? <h6 className=\"text-danger\">Could not load content, try again later</h6>\r\n              : (contentTree && this.mapRoutes(contentTree))}\r\n          </div>\r\n        </Layout>\r\n      </HashRouter>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","export * from './GitNode.d';\r\nexport * from './ContentTreeNode.d';","export interface IGitNodeLinks {\r\n  Git: string;\r\n  HTML: string;\r\n  Self: string;\r\n}\r\n\r\nexport interface IGitNode {\r\n  DownloadUrl: string;\r\n  GitUrl: string;\r\n  HTMLUrl: string;\r\n  Name: string;\r\n  Path: string;\r\n  SHA: string;\r\n  Size: number;\r\n  Type: string;\r\n  URL: string;\r\n  Links: IContentNodeLinks;\r\n}\r\n\r\n/**\r\n * Provides strong type and resolver for GitHub API data\r\n */\r\nexport class GitNode implements IGitNode {\r\n  public readonly DownloadUrl: string;\r\n  public readonly GitUrl: string;\r\n  public readonly HTMLUrl: string;\r\n  public readonly Name: string;\r\n  public readonly Path: string;\r\n  public readonly SHA: string;\r\n  public readonly Size: number;\r\n  public readonly Type: string;\r\n  public readonly URL: string;\r\n  public readonly Links: IContentNodeLinks;\r\n\r\n  constructor(responseData: any) {\r\n    this.DownloadUrl = responseData.download_url;\r\n    this.GitUrl = responseData.git_url;\r\n    this.HTMLUrl = responseData.html_url;\r\n    this.Name = responseData.name;\r\n    this.Path = responseData.path;\r\n    this.SHA = responseData.sha;\r\n    this.Size = responseData.size;\r\n    this.Type = responseData.type;\r\n    this.URL = responseData.url;\r\n    this.Links = {\r\n      Git: responseData._links.git,\r\n      HTML: responseData._links.html,\r\n      Self: responseData._links.self,\r\n    }\r\n  }\r\n}","module.exports = __webpack_public_path__ + \"static/media/logo.1e842800.png\";"],"sourceRoot":""}