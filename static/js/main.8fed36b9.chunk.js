(this.webpackJsonpwiki=this.webpackJsonpwiki||[]).push([[0],{221:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(64),l=n.n(i),c=n(7),s=n.n(c),u=n(17),h=n(3),d=n(14),m=n(10),p=n(12),f=(n(47),n(15)),v=n(31),g=n(65),b=n(42);!function(e){e.NavNodesCollapsedState="nav-nodes-collapsed-state"}(a||(a={}));var k=function(e,t){var n=localStorage.getItem(e),a=(n?JSON.parse(n):{})['"'.concat(t,'"')];return void 0===a?null:a},E=function(e,t,n){var a=localStorage.getItem(e),r=a?JSON.parse(a):{};r['"'.concat(t,'"')]=n,localStorage.setItem(e,JSON.stringify(r))},w=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).handleCollapseToggle=function(e){var t,n;t=o.props.node.name,n=!o.state.collapsed,E(a.NavNodesCollapsedState,t,n),o.setState({collapsed:!o.state.collapsed})},o.recurseChildren=function(e){return e.map((function(e){return r.createElement(n,{key:e.name,node:e,className:"pl-4 ".concat(o.state.collapsed&&"nav-collapsed")})}))},o.state={collapsed:!0},o}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e,t=(e=this.props.node.name,k(a.NavNodesCollapsedState,e));this.setState({collapsed:null===t?this.state.collapsed:t})}},{key:"render",value:function(){var e=this.props,t=e.node,n=e.className,a=this.state.collapsed;return t?r.createElement("ul",{key:t.name,className:"nav-item disable-selection ".concat(n)},r.createElement("div",{className:"row no-gutters pt-1 pb-1"},r.createElement("span",{className:"col-1 text-center pointer",onClick:this.handleCollapseToggle},t.children&&t.children.length?r.createElement(g.a,{icon:a?b.b:b.a,size:"sm"}):null),r.createElement(v.b,{className:"col-11 nav-link pt-0 pb-1",activeClassName:"selected-nav-link",to:"/".concat(t.urlPath)},t.name)),t.children&&t.children.length?this.recurseChildren(t.children):null):null}}]),n}(r.Component),y=n(68),N=function(e){var t=e.contentTree;return r.createElement("div",null,t&&t.children&&t.children.length?function(e){var t=y.cloneDeep(e.children),n=t.findIndex((function(e){return e.name.match(/\bhome\b/i)})),a=t.findIndex((function(e){return e.name.match(/\blinks\b/i)})),o=-1!==n?t.splice(n,1)[0]:null,i=-1!==a?t.splice(a,1)[0]:null;return t.unshift(o),t.push(i),t.map((function(e){return e?r.createElement(w,{key:e.name,node:e,className:"pl-0"}):null}))}(t):null)},x=function(e){return o.a.createElement("div",{id:"navigation"},o.a.createElement("ul",{className:"nav flex-column"},o.a.createElement(N,{contentTree:e.contentTree})))},S=n(69),T=n.n(S),C=(n(88),function(e){return r.createElement("div",{id:"busy-mask"},r.createElement("div",{className:"lds-ellipsis"},r.createElement("div",null),r.createElement("div",null),r.createElement("div",null),r.createElement("div",null)))});function O(e){return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{id:"main-banner",className:"row"},o.a.createElement("div",{className:"col-6 p-1 pl-5"},o.a.createElement("img",{id:"main-logo",src:T.a,width:"50px",height:"50px",alt:"logo"}),o.a.createElement("h3",{id:"main-title",className:"d-inline-block"},"Technological Wiki"))),e.isBusy?o.a.createElement(C,null):o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xl-3 col-sm-5"},o.a.createElement(x,{contentTree:e.contentTree})),o.a.createElement("div",{className:" col-xl-9 col-sm-7 mt-3 pt-3"},e.children)))}var _=n(70),j=n.n(_),U=n(45),P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(h.a)(this,e),this._octokit=void 0,this._owner="oleg3790",this._repo="wiki",this._octokit=new j.a({auth:t,userAgent:"wiki",baseUrl:"https://api.github.com"})}return Object(d.a)(e,[{key:"getSiteContentTree",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getGitNodes("wiki",0,[]);case 2:return t=e.sent,e.abrupt("return",t.length>0?this._buildContentTree(t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getGitNodes",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n,a){var r,o,i,l,c,u=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._octokit.repos.getContents({owner:this._owner,repo:this._repo,path:"".concat(t,"?ref=site-content")});case 3:if(200!==(r=e.sent).status){e.next=23;break}if(o=[],i=!1,Array.isArray(r.data)?o=r.data:"object"===typeof r.data&&o.push(r.data),o.forEach((function(e){var t=new U.GitNode(e);u._contentNodeExists(a,t)?i=!0:a.push(new U.GitNode(e))})),!i){e.next=11;break}return e.abrupt("return",a);case 11:l=n;case 12:if(!(l<a.length)){e.next=21;break}if("file"===a[l].Type){e.next=18;break}return c=encodeURIComponent(a[l].Path),e.next=17,this._getGitNodes(c,l+1,a);case 17:return e.abrupt("return",e.sent);case 18:l++,e.next=12;break;case 21:e.next=24;break;case 23:console.log("GitHub API responded with ".concat(r.status," with ").concat(r.data.length," data elements"));case 24:return e.abrupt("return",a);case 27:return e.prev=27,e.t0=e.catch(0),console.log("GitHubContentService.doGetContents Error - ".concat(e.t0.message)),e.abrupt("return",[]);case 31:case"end":return e.stop()}}),e,this,[[0,27]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"_buildContentTree",value:function(e){var t=this,n={name:null,downloadUrl:null,urlPath:null,children:[]};return e.filter((function(e){return"file"===e.Type})).forEach((function(e){var a=e.Path.split("/"),r=a.pop();r&&r.match(/index\.md/i)&&a.reduce((function(n,r,o){if(a.length-o-1){if(n.children&&n.children.length)return n.children.find((function(e){return e.name===r}))||n;n.name=n.name||r,n.children=n.children||[]}else n.children.push({name:r,children:[],downloadUrl:e.DownloadUrl,urlPath:t._toUrlSafePath(r)});return n}),n)})),n}},{key:"_contentNodeExists",value:function(e,t){return e.filter((function(e){return e.Path===t.Path})).length>0}},{key:"_toUrlSafePath",value:function(e){return[{from:/#/g,to:"sharp"},{from:/\.+/g,to:"dot"},{from:/\s{2,}/g,to:" "},{from:/[\s/\\]+/g,to:"-"},{from:/[()+~=!@$%^&*{}?]+/g,to:""}].forEach((function(t){e=e.toLowerCase().replace(t.from,t.to)})),e}}]),e}(),I=n(74),G=n.n(I),B=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={content:null,pageName:null},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.contentNode).downloadUrl){e.next=12;break}return e.next=4,fetch(t.downloadUrl);case 4:return n=e.sent,e.t0=this,e.next=8,n.text();case 8:e.t1=e.sent,e.t2=t.name,e.t3={content:e.t1,pageName:e.t2},e.t0.setState.call(e.t0,e.t3);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"nav-details"},this.state.content&&o.a.createElement("div",null,o.a.createElement("h1",{className:"page-title"},this.state.pageName),o.a.createElement("hr",null),o.a.createElement(G.a,{source:this.state.content,escapeHtml:!1})))}}]),n}(o.a.Component),H=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).toggleIsBusy=function(){a.setState({isBusy:!a.state.isBusy})},a.mapRoutes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.children.forEach((function(e){return e.downloadUrl&&e.urlPath&&t.push(o.a.createElement(f.b,{key:e.urlPath,path:"/".concat(e.urlPath),render:function(t){return o.a.createElement(B,Object.assign({},t,{contentNode:e}))}})),e.name.match(/home/i)&&t.unshift(o.a.createElement(f.b,{key:"//home//",path:"/"},o.a.createElement(f.a,{to:e.urlPath}))),a.mapRoutes(e,t)})),t},a.state={contentTree:null,isError:!1,isBusy:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.toggleIsBusy(),e.prev=1,t=localStorage.getItem("auth")||""){e.next=16;break}return e.next=6,fetch("http://olegkrysko-wiki-auth.azurewebsites.net/api/key",{method:"GET",headers:{"Request-Item":"ghKey","Content-Type":"text/plain"}});case 6:if(200!=(n=e.sent).status){e.next=15;break}return e.next=10,n.text();case 10:t=e.sent,localStorage.setItem("auth",t),console.debug("auth retrieved successfully"),e.next=16;break;case 15:console.log("Could not get auth for gh repo, requests to GH API will be limited");case 16:return a=new P(t),e.next=19,a.getSiteContentTree();case 19:if(null!=(r=e.sent)){e.next=22;break}throw"No tree content could be loaded";case 22:this.setState({contentTree:r}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),this.setState({isError:!0});case 28:this.toggleIsBusy();case 29:case"end":return e.stop()}}),e,this,[[1,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.contentTree,n=e.isBusy,a=e.isError;return o.a.createElement(v.a,{basename:"/"},o.a.createElement(O,{contentTree:t,isBusy:n},o.a.createElement("div",null,a?o.a.createElement("h6",{className:"text-danger"},"Could not load content, try again later"):t&&this.mapRoutes(t))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},45:function(e,t,n){"use strict";var a=n(55);n.d(t,"GitNode",(function(){return a.a}));n(56)},47:function(e,t,n){},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(3),r=function e(t){Object(a.a)(this,e),this.DownloadUrl=void 0,this.GitUrl=void 0,this.HTMLUrl=void 0,this.Name=void 0,this.Path=void 0,this.SHA=void 0,this.Size=void 0,this.Type=void 0,this.URL=void 0,this.Links=void 0,this.DownloadUrl=t.download_url,this.GitUrl=t.git_url,this.HTMLUrl=t.html_url,this.Name=t.name,this.Path=t.path,this.SHA=t.sha,this.Size=t.size,this.Type=t.type,this.URL=t.url,this.Links={Git:t._links.git,HTML:t._links.html,Self:t._links.self}}},56:function(e,t){},69:function(e,t,n){e.exports=n.p+"static/media/logo.1e842800.png"},75:function(e,t,n){e.exports=n(221)},88:function(e,t,n){}},[[75,1,2]]]);
//# sourceMappingURL=main.8fed36b9.chunk.js.map